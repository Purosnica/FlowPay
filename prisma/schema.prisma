// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

// ============================================
// CATÁLOGOS
// ============================================

model tbl_pais {
  idpais Int @id @default(autoincrement())
  codepais String
  descripcion String
  estado Boolean @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  departamentos tbl_departamento[]
  clientes tbl_cliente[]
  
  @@map("tbl_pais")
}

model tbl_departamento {
  iddepartamento Int @id @default(autoincrement())
  idpais Int
  descripcion String
  estado Boolean @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  pais tbl_pais @relation(fields: [idpais], references: [idpais])
  clientes tbl_cliente[]
  
  @@map("tbl_departamento")
}

model tbl_estadocivil {
  idestadocivil Int @id @default(autoincrement())
  descripcion String
  estado Boolean @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  clientes tbl_cliente[]
  
  @@map("tbl_estadocivil")
}

model tbl_ocupacion {
  idocupacion Int @id @default(autoincrement())
  descripcion String
  estado Boolean @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  clientes tbl_cliente[]
  
  @@map("tbl_ocupacion")
}

model tbl_tipodocumento {
  idtipodocumento Int @id @default(autoincrement())
  descripcion String
  estado Boolean @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  clientes tbl_cliente[]
  
  @@map("tbl_tipodocumento")
}

model tbl_tipopersona {
  idtipopersona Int @id @default(autoincrement())
  descripcion String
  estado Boolean @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  clientes tbl_cliente[]
  
  @@map("tbl_tipopersona")
}

model tbl_genero {
  idgenero Int @id @default(autoincrement())
  descripcion String
  estado Boolean @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  clientes tbl_cliente[]
  
  @@map("tbl_genero")
}

// ============================================
// CLIENTES
// ============================================

model tbl_cliente {
  idcliente Int @id @default(autoincrement())
  
  // Información personal
  primer_nombres String
  segundo_nombres String?
  primer_apellido String
  segundo_apellido String?
  fechanacimiento DateTime?
  
  // Documento de identidad
  idtipodocumento Int
  numerodocumento String @unique
  fechavencimientodoc DateTime?
  
  // Información demográfica
  idgenero Int?
  idestadocivil Int?
  idocupacion Int?
  idtipopersona Int
  
  // Ubicación
  idpais Int
  iddepartamento Int?
  direccion String?
  ciudad String?
  codigopostal String?
  
  // Contacto
  telefono String?
  celular String?
  email String? @unique
  sitioweb String?
  espep Boolean @default(false)
  
  // Información adicional
  observaciones String? @db.Text
  estado Boolean @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  // Relaciones
  tipodocumento tbl_tipodocumento @relation(fields: [idtipodocumento], references: [idtipodocumento])
  genero tbl_genero? @relation(fields: [idgenero], references: [idgenero])
  estadocivil tbl_estadocivil? @relation(fields: [idestadocivil], references: [idestadocivil])
  ocupacion tbl_ocupacion? @relation(fields: [idocupacion], references: [idocupacion])
  tipopersona tbl_tipopersona @relation(fields: [idtipopersona], references: [idtipopersona])
  pais tbl_pais @relation(fields: [idpais], references: [idpais])
  departamento tbl_departamento? @relation(fields: [iddepartamento], references: [iddepartamento])
  
  @@map("tbl_cliente")
  @@index([numerodocumento])
  @@index([email])
  @@index([idtipodocumento])
  @@index([idpais])
}